<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Conversation with #sailsjs at Wed 09 Jul 2014 09:58:09 AM MDT on randingo@irc.freenode.net (irc)</title></head><body><h3>Conversation with #sailsjs at Wed 09 Jul 2014 09:58:09 AM MDT on randingo@irc.freenode.net (irc)</h3>
<font size="2">(09:58:09 AM)</font><b> The topic for #sailsjs is: Documentation for v0.10 can be found at <a href="http://beta.sailsjs.org">http://beta.sailsjs.org</a></b><br/>
<font color="#A82F2F"><font size="2">(10:14:59 AM)</font> <b>Chubbs:</b></font> Is there any way to access the request in a models beforeCreate method?  I want to assign a peice of content to the user that created it during that hook, but im not sure if its possible<br/>
<font size="2">(10:37:25 AM)</font><b> tomfoole1y is now known as tomfoolery</b><br/>
<font size="2">(10:37:55 AM)</font><b> tomfoolery is now known as Guest30730</b><br/>
<font color="#A82F2F"><font size="2">(10:40:32 AM)</font> <b>jmcleod:</b></font> hey?<br/>
<font size="2">(10:42:22 AM)</font><b> Guest30730 is now known as tomfoolery</b><br/>
<font color="#A82F2F"><font size="2">(10:43:06 AM)</font> <b>JemiloII:</b></font> sup<br/>
<font color="#A82F2F"><font size="2">(10:43:42 AM)</font> <b>jmcleod:</b></font> hoping to bounce a csrf problem off someone<br/>
<font color="#A82F2F"><font size="2">(10:44:21 AM)</font> <b>jmcleod:</b></font> i have csrf enabled in my sails app, and post requests that i make from inside the app are being run through the csrf middleware fine<br/>
<font color="#A82F2F"><font size="2">(10:44:46 AM)</font> <b>jmcleod:</b></font> but if i inject a form with a post action to my local env (from a 3rd party domain) the post actions are NOT being run through the csrf middleware :/<br/>
<font color="#A82F2F"><font size="2">(10:44:57 AM)</font> <b>jmcleod:</b></font> so the posts are landing just fine :/<br/>
<font color="#A82F2F"><font size="2">(10:45:27 AM)</font> <b>jmcleod:</b></font> and by fine i mean… external domains can make a big ol mess in my app<br/>
<font color="#A82F2F"><font size="2">(10:50:12 AM)</font> <b>JemiloII:</b></font> you need to allow the domain via cors<br/>
<font color="#A82F2F"><font size="2">(10:50:29 AM)</font> <b>sailsTroll:</b></font> mikermcneil just pushed to the removeattr_prompt branch of waterline: see https://github.com/balderdashy/sails/issues/1931 and https://twitter.com/sailsjs/status/486901258993668096<br/>
<font color="#A82F2F"><font size="2">(10:50:32 AM)</font> <b>jmcleod:</b></font> well what im aiming for is, blocking other domains entirely<br/>
<font color="#A82F2F"><font size="2">(10:50:50 AM)</font> <b>JemiloII:</b></font> you just tell it to allow your 3rd party domain<br/>
<font color="#A82F2F"><font size="2">(10:50:51 AM)</font> <b>jmcleod:</b></font> i thought i would be getting that for free with cors turned on<br/>
<font color="#A82F2F"><font size="2">(10:51:00 AM)</font> <b>JemiloII:</b></font> vai the cors.js config file<br/>
<font color="#A82F2F"><font size="2">(10:51:09 AM)</font> <b>jmcleod:</b></font> ill check these links out, thanks<br/>
<font color="#A82F2F"><font size="2">(10:51:44 AM)</font> <b>jmcleod:</b></font> oh derp<br/>
<font color="#A82F2F"><font size="2">(10:52:00 AM)</font> <b>jmcleod:</b></font> unrelated, didnt read the names<br/>
<font color="#A82F2F"><font size="2">(10:52:02 AM)</font> <b>jmcleod:</b></font> haha<br/>
<font color="#A82F2F"><font size="2">(10:52:08 AM)</font> <b>JemiloII:</b></font> xD<br/>
<font color="#A82F2F"><font size="2">(10:52:43 AM)</font> <b>jmcleod:</b></font> the csrf.js file should just return true or false, right?<br/>
<font color="#A82F2F"><font size="2">(10:53:01 AM)</font> <b>jmcleod:</b></font> false by default.. and true if my front end is ready to deal with the token mixin<br/>
<font color="#A82F2F"><font size="2">(10:55:19 AM)</font> <b>Chubbs:</b></font> how do I add multiple values in a many-to-many relationship via an API call?  Every method I have tried is failing<br/>
<font color="#A82F2F"><font size="2">(10:55:59 AM)</font> <b>jmcleod:</b></font> never messed with the many-to-many setup in sails before, got nothin for ya.. sorry<br/>
<font color="#A82F2F"><font size="2">(10:56:40 AM)</font> <b>JemiloII:</b></font> what do you mean?<br/>
<font color="#A82F2F"><font size="2">(10:57:54 AM)</font> <b>JemiloII:</b></font> has anyone noticed a changed in chrome&apos;s inspecter?<br/>
<font color="#A82F2F"><font size="2">(11:00:46 AM)</font> <b>Chubbs:</b></font> To clarify: I have a Post model, and a Tag model, where a post can have many tags, when creating a post via the REST api created for it, I can specify a single tag ID and that will write to the database fine, but I can&apos;t provide an array of ids, or comma seperated list, etc<br/>
<font color="#A82F2F"><font size="2">(11:01:25 AM)</font> <b>Chubbs:</b></font> It seems to only accept 1 value ever, and if I try and PUT another value on an existing Post, the old tag is overwritten<br/>
<font color="#A82F2F"><font size="2">(11:04:06 AM)</font> <b>JemiloII:</b></font> have you tried feeding it a json?<br/>
<font color="#A82F2F"><font size="2">(11:07:47 AM)</font> <b>veenutanwar:</b></font> Ya there are lot of change !<br/>
<font color="#A82F2F"><font size="2">(11:08:41 AM)</font> <b>veenutanwar:</b></font> jemilo aap bhi jimloo<br/>
<font color="#A82F2F"><font size="2">(11:09:22 AM)</font> <b>Chubbs:</b></font> Jemiloll: yes I&apos;ve tried posting with tags=[1,2] and that doesnt work<br/>
<font color="#A82F2F"><font size="2">(11:09:49 AM)</font> <b>Chubbs:</b></font> Im getting validation errors that it expects an int<br/>
<font color="#A82F2F"><font size="2">(11:10:12 AM)</font> <b>veenutanwar:</b></font> why sails take time on post or put data ??<br/>
<font color="#A82F2F"><font size="2">(11:10:41 AM)</font> <b>veenutanwar:</b></font> retive time  =4-7 ms and post &amp; put time 90-99 ms why ??<br/>
<font color="#A82F2F"><font size="2">(11:10:48 AM)</font> <b>JemiloII:</b></font> javascript objects are {}<br/>
<font color="#A82F2F"><font size="2">(11:11:24 AM)</font> <b>JemiloII:</b></font> chubb can you show some code?<br/>
<font color="#A82F2F"><font size="2">(11:11:59 AM)</font> <b>JemiloII:</b></font> veenutanwar, i&apos;d have no clue unless i saw the code you were using<br/>
<font color="#A82F2F"><font size="2">(11:12:26 AM)</font> <b>Chubbs:</b></font> sure let me put together a paste<br/>
<font color="#A82F2F"><font size="2">(11:13:31 AM)</font> <b>veenutanwar:</b></font> http://pastebin.com/HyhbgFyT<br/>
<font color="#A82F2F"><font size="2">(11:15:07 AM)</font> <b>veenutanwar:</b></font> please look @<br/>
<font color="#A82F2F"><font size="2">(11:16:24 AM)</font> <b>Chubbs:</b></font> Jemiloll: Thank you, I changed how I am sending data to my API and it worked by posting a JSON string instead of key value pairs<br/>
<font color="#A82F2F"><font size="2">(11:18:29 AM)</font> <b>JemiloII:</b></font> anytime Chubbs<br/>
<font color="#A82F2F"><font size="2">(11:20:45 AM)</font> <b>Tobius:</b></font> nik69 - do I have to install software to see those screenshots?<br/>
<font color="#A82F2F"><font size="2">(11:21:05 AM)</font> <b>Tobius:</b></font> nm, downloaded them<br/>
<font color="#A82F2F"><font size="2">(11:22:11 AM)</font> <b>JemiloII:</b></font> veenutanwar any reason you made the update function for your controller? You can just post to the blueprint update route with json and it will update your records<br/>
<font color="#A82F2F"><font size="2">(11:23:06 AM)</font> <b>jmcleod:</b></font> anyone got tips on blocking GET methods against controller methods?<br/>
<font color="#A82F2F"><font size="2">(11:23:18 AM)</font> <b>jmcleod:</b></font> i have a createThing method<br/>
<font color="#A82F2F"><font size="2">(11:23:24 AM)</font> <b>jmcleod:</b></font> but i only want it accessable via post<br/>
<font color="#A82F2F"><font size="2">(11:23:38 AM)</font> <b>jmcleod:</b></font> sails magically makes it avaiable to both.. :P<br/>
<font color="#A82F2F"><font size="2">(11:24:05 AM)</font> <b>JemiloII:</b></font> your talking about the browser method to create things?<br/>
<font color="#A82F2F"><font size="2">(11:24:16 AM)</font> <b>jmcleod:</b></font> yeah<br/>
<font color="#A82F2F"><font size="2">(11:24:30 AM)</font> <b>JemiloII:</b></font> config/blueprints.js   find shortcuts and set it to false<br/>
<font color="#A82F2F"><font size="2">(11:24:32 AM)</font> <b>jmcleod:</b></font> i want to block socket.get(‘/mycontroller/createThing’)<br/>
<font color="#A82F2F"><font size="2">(11:24:34 AM)</font> <b>jmcleod:</b></font> but allow<br/>
<font color="#A82F2F"><font size="2">(11:24:48 AM)</font> <b>jmcleod:</b></font> socket.post(‘/mycontroller/createThing’)<br/>
<font color="#A82F2F"><font size="2">(11:25:10 AM)</font> <b>jmcleod:</b></font> im backing into sails for this project… so i dont want to destroy the API the app is using..<br/>
<font color="#A82F2F"><font size="2">(11:25:12 AM)</font> <b>JemiloII:</b></font> its just a shortcuts they built in to help you test code<br/>
<font color="#A82F2F"><font size="2">(11:25:12 AM)</font> <b>jmcleod:</b></font> yet :P<br/>
<font color="#A82F2F"><font size="2">(11:25:22 AM)</font> <b>JemiloII:</b></font> so you just disable the shortcuts<br/>
<font color="#A82F2F"><font size="2">(11:25:31 AM)</font> <b>jmcleod:</b></font> thought i tried that.. ill check again<br/>
<font color="#A82F2F"><font size="2">(11:25:50 AM)</font> <b>JemiloII:</b></font> or your meaning<br/>
<font color="#A82F2F"><font size="2">(11:25:56 AM)</font> <b>JemiloII:</b></font> you don&apos;t want data to be returned<br/>
<font color="#A82F2F"><font size="2">(11:25:58 AM)</font> <b>jmcleod:</b></font> wait i dont have blueprints.js haha<br/>
<font color="#A82F2F"><font size="2">(11:26:05 AM)</font> <b>jmcleod:</b></font> well id like to just blackhole the request<br/>
<font color="#A82F2F"><font size="2">(11:26:18 AM)</font> <b>jmcleod:</b></font> or reply with 403 i guess<br/>
<font color="#A82F2F"><font size="2">(11:26:20 AM)</font> <b>JemiloII:</b></font> um lemme look at the docs, they have a setting for that<br/>
<font color="#A82F2F"><font size="2">(11:26:30 AM)</font> <b>jmcleod:</b></font> 405*<br/>
<font color="#A82F2F"><font size="2">(11:26:31 AM)</font> <b>JemiloII:</b></font> you just put it in the controller<br/>
<font color="#A82F2F"><font size="2">(11:28:20 AM)</font> <b>jmcleod:</b></font> ah i found the blueprints bit in controllers.js<br/>
<font color="#A82F2F"><font size="2">(11:28:22 AM)</font> <b>jmcleod:</b></font> thanks<br/>
<font color="#A82F2F"><font size="2">(11:28:50 AM)</font> <b>jmcleod:</b></font> i like the magic-ness of sails.. but here i am defining routes again haha<br/>
<font color="#A82F2F"><font size="2">(11:29:50 AM)</font> <b>Tobius:</b></font> nik69 - I don&apos;t have a local version of 0.9 to test it with at the moment but I just tested it with 0.10 and it worked as expected, if I get a chance I&apos;ll try on 0.9 later today and see what&apos;s up<br/>
<font color="#A82F2F"><font size="2">(11:34:26 AM)</font> <b>Chubbs:</b></font> Jemiloll: thanks for your help on posting the JSON to fix the many-to-many, everything seems to be storing fine, however I still cant get the tags to populate during a find operation on my api endpoint, any suggestions<br/>
<font color="#A82F2F"><font size="2">(11:34:33 AM)</font> <b>jmcleod:</b></font> so in general, for production ready apps<br/>
<font color="#A82F2F"><font size="2">(11:34:40 AM)</font> <b>jmcleod:</b></font> do you guys have a big ol routes file?<br/>
<font color="#A82F2F"><font size="2">(11:34:50 AM)</font> <b>jmcleod:</b></font> i guess it depends on the app<br/>
<font color="#A82F2F"><font size="2">(11:36:37 AM)</font> <b>veenutanwar:</b></font> JemiloII &gt; i retiving data from rest and it give me first time 30 rec from all 800 recored how can i retive others<br/>
<font color="#A82F2F"><font size="2">(11:36:41 AM)</font> <b>JemiloII:</b></font> Chubbs http://beta.sailsjs.org/#/documentation/concepts/CORS that looks interesting to note,<br/>
<font color="#A82F2F"><font size="2">(11:37:36 AM)</font> <b>Chubbs:</b></font> I dont think thats the issue, every other request on my api is fine<br/>
<font color="#A82F2F"><font size="2">(11:37:56 AM)</font> <b>Chubbs:</b></font> its just that the tags field is not populated when i retrieve the data<br/>
<font color="#A82F2F"><font size="2">(11:38:01 AM)</font> <b>JemiloII:</b></font> veenutanwar, lemme look into it, i think its a default limit built in to the standard restful query, but we can override it<br/>
<font color="#A82F2F"><font size="2">(11:38:53 AM)</font> <b>Chubbs:</b></font> there are no errors, just an empty array<br/>
<font color="#A82F2F"><font size="2">(11:39:29 AM)</font> <b>JemiloII:</b></font> hmmm<br/>
<font size="2">(11:41:13 AM)</font><b> veenutanwar left the room (quit: ).</b><br/>
<font color="#A82F2F"><font size="2">(11:41:38 AM)</font> <b>Chubbs:</b></font> Jemiloll: I&apos;ve created a dpaste with some code snippets, it all seems to look fine except for the request<br/>
<font color="#A82F2F"><font size="2">(11:41:38 AM)</font> <b>Chubbs:</b></font> http://dpaste.com/1H04D8P<br/>
<font color="#A82F2F"><font size="2">(11:47:26 AM)</font> <b>JemiloII:</b></font> your doing a many to many right?<br/>
<font color="#A82F2F"><font size="2">(11:50:31 AM)</font> <b>Chubbs:</b></font> correct, each blog post can contain many tags, each tag can be referenced by many blog posts<br/>
<font color="#A82F2F"><font size="2">(11:56:02 AM)</font> <b>Chubbs:</b></font> I might not be understanding the correct usage of the association in the model, do I require a via attribute for this relationship? or a dominant flag?<br/>
<font color="#A82F2F"><font size="2">(01:31:29 PM)</font> <b>sailsTroll:</b></font> sgress454 just pushed to the master branch of sails: Merge branch &apos;master&apos; of github.com:balderdashy/sails<br/>
<font size="2">(01:37:30 PM)</font><b> miqui_ is now known as miqui</b><br/>
<font color="#A82F2F"><font size="2">(01:44:25 PM)</font> <b>sails-user:</b></font> hey guys just a qq<br/>
<font color="#A82F2F"><font size="2">(01:45:24 PM)</font> <b>sails-user:</b></font> I noticed with the recent update to the beta.sailsjs.org site, the documentation for models and connections are now missing<br/>
<font color="#A82F2F"><font size="2">(01:45:42 PM)</font> <b>sails-user:</b></font> Any idea of when this will be available again?<br/>
<font color="#A82F2F"><font size="2">(01:47:20 PM)</font> <b>seydoggy:</b></font> sails-user: really? sails-user?<br/>
<font color="#A82F2F"><font size="2">(01:47:26 PM)</font> <b>seydoggy:</b></font> jk, lol<br/>
<font color="#A82F2F"><font size="2">(01:47:35 PM)</font> <b>seydoggy:</b></font> hi James :)<br/>
<font color="#A82F2F"><font size="2">(01:47:46 PM)</font> <b>sails-user:</b></font> Hello Adam<br/>
<font size="2">(01:55:30 PM)</font><b> Leath is now known as ICCULUSC</b><br/>
<font color="#A82F2F"><font size="2">(02:06:45 PM)</font> <b>Tobius:</b></font> The optional var auto_reconnect is not passed to connect-mongo if you&apos;re using a url rather than breaking your connection string down into component parts (e.g. host, port, db, w). Is this on purpose or is this an oversight?<br/>
<font color="#A82F2F"><font size="2">(02:07:10 PM)</font> <b>Tobius:</b></font> Specifically I&apos;m talking about for the session adapter, not the default adapter<br/>
<font color="#A82F2F"><font size="2">(02:23:25 PM)</font> <b>JetFault:</b></font> Hey, did anyone ever have to deal with making a policy for a REST blueprint, that checked a value in that model. So for example, I have a model `User`, and I want to make sure `req.user.id` === User.id  before returning that model. So the problem I see now is that 2 calls have to be made, once to make sure the policy passes, and then again from the REST Blueprint to get that model<br/>
<font color="#A82F2F"><font size="2">(02:27:59 PM)</font> <b>jdcauley:</b></font> jetfault i think i handled that in the controller<br/>
<font color="#A82F2F"><font size="2">(02:29:13 PM)</font> <b>jdcauley:</b></font> example you&apos;re saying you want to make sure only the logged in user can edit their own info etc right?<br/>
<font color="#A82F2F"><font size="2">(02:29:22 PM)</font> <b>JetFault:</b></font> @jdcauley, right<br/>
<font color="#A82F2F"><font size="2">(02:29:50 PM)</font> <b>JetFault:</b></font> so you overwrote the create/update to do the DB calls, and then return forbidden or (res.send/res.view)?<br/>
<font color="#A82F2F"><font size="2">(02:29:50 PM)</font> <b>jdcauley:</b></font> are you using the built in templates?<br/>
<font color="#A82F2F"><font size="2">(02:31:24 PM)</font> <b>JetFault:</b></font> what do you mean?<br/>
<font color="#A82F2F"><font size="2">(02:31:34 PM)</font> <b>jdcauley:</b></font> the way i do it is that the update template populates using the logged in user<br/>
<font color="#A82F2F"><font size="2">(02:32:29 PM)</font> <b>jdcauley:</b></font> honestly im trying to remember<br/>
<font color="#A82F2F"><font size="2">(02:32:30 PM)</font> <b>jdcauley:</b></font> https://github.com/jdcauley/Schooner/tree/2.0<br/>
<font color="#A82F2F"><font size="2">(02:32:38 PM)</font> <b>jdcauley:</b></font> thats my boiler<br/>
<font color="#A82F2F"><font size="2">(02:33:00 PM)</font> <b>JetFault:</b></font> so for me its not really User, its a Post, that has an owner. so i have to check Post.owner === req.user.id<br/>
<font color="#A82F2F"><font size="2">(02:34:30 PM)</font> <b>jdcauley:</b></font> ok so personally yes in the controller i would start with that<br/>
<font color="#A82F2F"><font size="2">(02:34:52 PM)</font> <b>jdcauley:</b></font> you could also only allow an edit button on posts the user owns<br/>
<font color="#A82F2F"><font size="2">(02:35:18 PM)</font> <b>jdcauley:</b></font> which would be a little different but same basic process<br/>
<font color="#A82F2F"><font size="2">(02:36:45 PM)</font> <b>marc_v92:</b></font> Hey all, pretty new to Sails/Node in general, running Angular on top of Sails, have a quick question. I’m trying to have “/alert/get-most-recent/“ return a single object from the database, but simply doing res.end(a[0]) kills the server, saying I have to return a string or buffer.<br/>
<font color="#A82F2F"><font size="2">(02:36:51 PM)</font> <b>JetFault:</b></font> But then they can still make a XHR call to bypass the FE button<br/>
<font color="#A82F2F"><font size="2">(02:37:15 PM)</font> <b>marc_v92:</b></font> How can I do a res.end() with the object?<br/>
<font color="#A82F2F"><font size="2">(02:37:47 PM)</font> <b>marc_v92:</b></font> http://dpaste.com/1EBZESW<br/>
<font color="#A82F2F"><font size="2">(02:38:08 PM)</font> <b>marc_v92:</b></font> There’s the code in question. Ignore the JSON.stringify(), that was a feeble attempt to make it work, lol.<br/>
<font color="#A82F2F"><font size="2">(02:38:14 PM)</font> <b>jdcauley:</b></font> JetFault well yeah but only if they have the post id<br/>
<font color="#A82F2F"><font size="2">(02:38:25 PM)</font> <b>JetFault:</b></font> @marc_v92, try res.send<br/>
<font color="#A82F2F"><font size="2">(02:39:06 PM)</font> <b>jdcauley:</b></font> if that is an issue you&apos;re concerned with then you&apos;ll def have to check the user against the post owner, but it sounds like for good UI you&apos;ll need both of those things going<br/>
<font color="#A82F2F"><font size="2">(02:39:23 PM)</font> <b>jdcauley:</b></font> maybe someone else has a better idea though<br/>
<font color="#A82F2F"><font size="2">(02:40:06 PM)</font> <b>JetFault:</b></font> @jdcauley, no you&apos;re right i was just wondering if there was a way to get a policy to run after the REST Blueprint got the model, but before it actually sent it<br/>
<font color="#A82F2F"><font size="2">(02:40:48 PM)</font> <b>marc_v92:</b></font> JetFault: Worked beautiful, thanks! Is there a better way to access a Sails model from Angular, or is this standard practice?<br/>
<font color="#A82F2F"><font size="2">(02:40:53 PM)</font> <b>marc_v92:</b></font> beautifully*<br/>
<font color="#A82F2F"><font size="2">(02:42:08 PM)</font> <b>JetFault:</b></font> @marc_v92 if you enable REST blueprints, you can do a GET call to `/model/1`<br/>
<font color="#A82F2F"><font size="2">(02:42:29 PM)</font> <b>jdcauley:</b></font> JetFault  re XHR call<br/>
<font color="#A82F2F"><font size="2">(02:42:41 PM)</font> <b>jdcauley:</b></font> if the use has to be logged in to do anything<br/>
<font color="#A82F2F"><font size="2">(02:42:51 PM)</font> <b>jdcauley:</b></font> they won&apos;t be able to make an XHR call<br/>
<font color="#A82F2F"><font size="2">(02:43:17 PM)</font> <b>jdcauley:</b></font> right?<br/>
<font color="#A82F2F"><font size="2">(02:43:26 PM)</font> <b>marc_v92:</b></font> JetFault: I do have REST blueprints, but since each Alert that’s posted gets appended to the end, I have no way of knowing what the ID of the most recent Alert is, unfortunately.<br/>
<font color="#A82F2F"><font size="2">(02:43:47 PM)</font> <b>marc_v92:</b></font> JetFault: Unless there’s a way that I’m not aware of?<br/>
<font color="#A82F2F"><font size="2">(02:43:50 PM)</font> <b>jdcauley:</b></font> because they can&apos;t change the post request in transit can they?<br/>
<font color="#A82F2F"><font size="2">(02:44:05 PM)</font> <b>JetFault:</b></font> @jdcauley copying the cookie from browser<br/>
<font color="#A82F2F"><font size="2">(02:44:20 PM)</font> <b>JetFault:</b></font> @jdcauley, also you can if you use a proxy like Charles<br/>
<font color="#A82F2F"><font size="2">(02:46:22 PM)</font> <b>JetFault:</b></font> @marc_v92 can you try /alerts?sort=createdAt%20DESC&amp;limit=1<br/>
<font color="#A82F2F"><font size="2">(02:47:18 PM)</font> <b>JetFault:</b></font> alert*<br/>
<font color="#A82F2F"><font size="2">(02:49:26 PM)</font> <b>marc_v92:</b></font> JetFault: I’ll give it a try, one sec.<br/>
<font color="#A82F2F"><font size="2">(02:52:00 PM)</font> <b>marc_v92:</b></font> JetFault: That also works, awesome! One last question, and I think I’ll be set: Each “Alert” has an “active” flag. How would I use that same method to only grab the most recent “active” Alert?<br/>
<font color="#A82F2F"><font size="2">(02:52:36 PM)</font> <b>JetFault:</b></font> http://beta.sailsjs.org/#/documentation/reference/Blueprint-API/Find.html<br/>
<font color="#A82F2F"><font size="2">(02:53:12 PM)</font> <b>marc_v92:</b></font> JetFault: Wow, I’ve been searching for the full Sails docs for days. Thanks!<br/>
<font color="#A82F2F"><font size="2">(02:53:22 PM)</font> <b>JetFault:</b></font> so you can append to that &amp;where={&quot;active&quot;:&quot;true&quot;}<br/>
<font color="#A82F2F"><font size="2">(02:53:38 PM)</font> <b>JetFault:</b></font> those docs are for v0.10<br/>
<font color="#A82F2F"><font size="2">(02:53:39 PM)</font> <b>jdcauley:</b></font> jetfault, doesn&apos;t the cookie only work for the specific user they are logged in as?<br/>
<font color="#A82F2F"><font size="2">(02:55:04 PM)</font> <b>marc_v92:</b></font> JetFault: I’m running 0.10, so that’s perfect! Thanks again, you’ve saved me so much time now that I actually have docs to reference, haha.<br/>
<font color="#A82F2F"><font size="2">(02:55:45 PM)</font> <b>JetFault:</b></font> @marc_v92, yep!<br/>
<font color="#A82F2F"><font size="2">(02:58:12 PM)</font> <b>JetFault:</b></font> @jdcauley, yeah, but you still need a policy or controller to check that the logged in user has the permission to edit that model<br/>
<font size="2">(03:01:02 PM)</font><b> marc_v92 left the room (quit: Quit: I should probably get back to work...).</b><br/>
<font color="#A82F2F"><font size="2">(03:08:53 PM)</font> <b>sailsTroll:</b></font> mikermcneil just pushed to the native-joins branch of sails-mysql: Fixes issue with automigrate when no records are present (really a problem with createEach)<br/>
<font color="#A82F2F"><font size="2">(03:10:01 PM)</font> <b>sailsTroll:</b></font> mikermcneil just pushed to the native-joins branch of sails-mysql: Disable query logs.<br/>
<font color="#A82F2F"><font size="2">(03:13:39 PM)</font> <b>adifah1:</b></font> JetFault: you could try adding req.user.id as a body data<br/>
<font color="#A82F2F"><font size="2">(03:14:23 PM)</font> <b>adifah1:</b></font> do you want to filter the returned items by this id?<br/>
<font color="#A82F2F"><font size="2">(03:24:54 PM)</font> <b>JetFault:</b></font> @adifah1, yeah i already do req.user.id as body data for when i want to create a new posting and make that user the owner. But yeah this is for filtering, so only allowing the user to see postings he owns<br/>
<font color="#A82F2F"><font size="2">(03:25:26 PM)</font> <b>adifah1:</b></font> ok then simply add the policy also to find requests<br/>
<font color="#A82F2F"><font size="2">(03:25:56 PM)</font> <b>adifah1:</b></font> should be work the same way<br/>
<font color="#A82F2F"><font size="2">(03:26:41 PM)</font> <b>adifah1:</b></font> every get request to the model should be turned into a find request with the user id as parameter<br/>
<font color="#A82F2F"><font size="2">(03:27:11 PM)</font> <b>JetFault:</b></font> would that work for a request to `/posting/1` if the user doesn&apos;t have access to that model<br/>
<font color="#A82F2F"><font size="2">(03:28:27 PM)</font> <b>adifah1:</b></font> i think so. posting/1 sould then be turned in a find request to model posting with to parameters (id=1 and userId= x)<br/>
<font color="#A82F2F"><font size="2">(03:28:32 PM)</font> <b>adifah1:</b></font> but not sure :9<br/>
<font color="#A82F2F"><font size="2">(03:29:12 PM)</font> <b>JetFault:</b></font> yeah but thanks! didn&apos;t think of that, ill check out if it works for a find<br/>
<font color="#A82F2F"><font size="2">(03:30:34 PM)</font> <b>adifah1:</b></font> hm but i think you&apos;ll get problems with updates<br/>
<font color="#A82F2F"><font size="2">(03:32:53 PM)</font> <b>adifah1:</b></font> JetFault: ok maybe this is not the best solution for your problem, becaus requests to &apos;/posting/1&apos; won&apos;t work too<br/>
<font color="#A82F2F"><font size="2">(03:33:09 PM)</font> <b>adifah1:</b></font> because they route to the findOne blueprint action and not to find<br/>
<font color="#A82F2F"><font size="2">(04:17:54 PM)</font> <b>Sialagio:</b></font> hey guys<br/>
<font color="#A82F2F"><font size="2">(04:18:04 PM)</font> <b>Sialagio:</b></font> I am having an async issue in my code.<br/>
<font color="#A82F2F"><font size="2">(04:18:26 PM)</font> <b>Sialagio:</b></font> I have a Cart that I fill with lines<br/>
<font color="#A82F2F"><font size="2">(04:18:27 PM)</font> <b>Sialagio:</b></font> http://pastebin.com/pzbcRzXj<br/>
<font color="#A82F2F"><font size="2">(04:18:36 PM)</font> <b>Sialagio:</b></font> This is the CartController.<br/>
<font color="#A82F2F"><font size="2">(04:18:47 PM)</font> <b>Sialagio:</b></font> I push the cart ine the session.<br/>
<font color="#A82F2F"><font size="2">(04:19:17 PM)</font> <b>Sialagio:</b></font> When I call another controller to update a line, lines array from the cart is no more present<br/>
<font color="#A82F2F"><font size="2">(04:20:00 PM)</font> <b>Sialagio:</b></font> Cartline controller is here :<br/>
<font color="#A82F2F"><font size="2">(04:20:01 PM)</font> <b>Sialagio:</b></font> http://pastebin.com/tS6CK71U<br/>
<font color="#A82F2F"><font size="2">(04:20:53 PM)</font> <b>Sialagio:</b></font> When I check req.session.cart in the policy before loading page /cartline/setformule, lines array is not present<br/>
<font color="#A82F2F"><font size="2">(04:21:20 PM)</font> <b>Sialagio:</b></font> When I check req.session.cart at the very end of /cart/create, I get the lines.<br/>
<font color="#A82F2F"><font size="2">(04:23:51 PM)</font> <b>Sialagio:</b></font> nobody ? :)<br/>
<font color="#A82F2F"><font size="2">(04:24:38 PM)</font> <b>rawtaz:</b></font> Sialagio: patience<br/>
<font color="#A82F2F"><font size="2">(04:24:53 PM)</font> <b>Sialagio:</b></font> yes, very important :)<br/>
<font color="#A82F2F"><font size="2">(04:25:04 PM)</font> <b>rawtaz:</b></font> (and no, i have no idea about your issue :)<br/>
<font color="#A82F2F"><font size="2">(04:25:17 PM)</font> <b>Sialagio:</b></font> lol<br/>
<font color="#A82F2F"><font size="2">(04:30:11 PM)</font> <b>Sialagio:</b></font> found why ...<br/>
<font color="#A82F2F"><font size="2">(04:30:16 PM)</font> <b>Sialagio:</b></font> bloody hell<br/>
<font color="#A82F2F"><font size="2">(04:30:35 PM)</font> <b>Sialagio:</b></font> been stuck on that for like 3 hours and I come here and find the reason ...<br/>
<font color="#A82F2F"><font size="2">(04:31:04 PM)</font> <b>rawtaz:</b></font> :D<br/>
<font color="#A82F2F"><font size="2">(04:31:10 PM)</font> <b>rawtaz:</b></font> what was it?<br/>
<font color="#A82F2F"><font size="2">(04:33:01 PM)</font> <b>Sialagio:</b></font> I was setting req.session.cart before calling getCart (in which I get lines)<br/>
<font color="#A82F2F"><font size="2">(04:33:28 PM)</font> <b>Sialagio:</b></font> when I set req.session.cart in the function or after using another object, no more issue<br/>
<font color="#A82F2F"><font size="2">(04:37:48 PM)</font> <b>Sialagio:</b></font> another question, if I do toto = titi, toto is the instance as titi<br/>
<font color="#A82F2F"><font size="2">(04:38:01 PM)</font> <b>Sialagio:</b></font> but if I do toto = _.clone(titi)<br/>
<font color="#A82F2F"><font size="2">(04:38:06 PM)</font> <b>Sialagio:</b></font> it is a new instance right ?<br/>
<font color="#A82F2F"><font size="2">(04:39:46 PM)</font> <b>rawtaz:</b></font> i dunno, but i guess the docs for that method should say<br/>
<font color="#A82F2F"><font size="2">(04:39:51 PM)</font> <b>rawtaz:</b></font> _ is underscore afaik<br/>
<font color="#A82F2F"><font size="2">(04:40:06 PM)</font> <b>rawtaz:</b></font> underscore.js*<br/>
<font color="#A82F2F"><font size="2">(04:40:21 PM)</font> <b>rawtaz:</b></font> &quot;Create a shallow-copied clone of the object. Any nested objects or arrays will be copied by reference, not duplicated.&quot;<br/>
<font color="#A82F2F"><font size="2">(04:40:32 PM)</font> <b>rawtaz:</b></font> http://underscorejs.org/#clone<br/>
<font color="#A82F2F"><font size="2">(04:41:12 PM)</font> <b>adifah1:</b></font> its lodash not underscore, but its pretty the same api<br/>
<font color="#A82F2F"><font size="2">(04:41:19 PM)</font> <b>rawtaz:</b></font> ah ok<br/>
<font color="#A82F2F"><font size="2">(04:41:36 PM)</font> <b>adifah1:</b></font> (but lodash is faster)<br/>
<font color="#A82F2F"><font size="2">(04:43:14 PM)</font> <b>adifah1:</b></font> Sialagio why do you want to add the cart to the session?<br/>
<font color="#A82F2F"><font size="2">(04:43:42 PM)</font> <b>Sialagio:</b></font> why should&apos;nt I ?<br/>
<font color="#A82F2F"><font size="2">(04:43:42 PM)</font> <b>Sialagio:</b></font> :)<br/>
<font color="#A82F2F"><font size="2">(04:43:49 PM)</font> <b>adifah1:</b></font> whats the benefit? ;)<br/>
<font color="#A82F2F"><font size="2">(04:43:56 PM)</font> <b>Sialagio:</b></font> It avoid reading database many times<br/>
<font color="#A82F2F"><font size="2">(04:44:30 PM)</font> <b>adifah1:</b></font> ok, and in the end you transform the cart to an order object and persist it?<br/>
<font color="#A82F2F"><font size="2">(04:45:20 PM)</font> <b>Sialagio:</b></font> it is persisted. update is done for each line for the line only<br/>
<font color="#A82F2F"><font size="2">(04:45:32 PM)</font> <b>Sialagio:</b></font> so if session is lost, I can retrieve it<br/>
<font color="#A82F2F"><font size="2">(04:48:31 PM)</font> <b>adifah1:</b></font> and you put it into the session to avoid reads when the user perform a new page request?<br/>
<font color="#A82F2F"><font size="2">(04:51:12 PM)</font> <b>Sialagio:</b></font> exactly<br/>
<font color="#A82F2F"><font size="2">(04:53:27 PM)</font> <b>adifah1:</b></font> could lead into problems when you try to persist the sessions (redis session-store) to scale up your application on multiple servers<br/>
<font color="#A82F2F"><font size="2">(04:55:15 PM)</font> <b>Sialagio:</b></font> session-store issue ? why is that ?<br/>
<font size="2">(04:56:41 PM)</font><b> Brocken is now known as zz_Brocken</b><br/>
<font color="#A82F2F"><font size="2">(04:59:26 PM)</font> <b>adifah1:</b></font> because your sessions change very frequently. dont know, maybe it could result in may writes (what you want to avert). but your idea sounds good anyway<br/>
<font color="#A82F2F"><font size="2">(05:04:10 PM)</font> <b>Sialagio:</b></font> I won&apos;t need a huge scalability ... so inmemory sounds enough<br/>
<font color="#A82F2F"><font size="2">(05:04:29 PM)</font> <b>Sialagio:</b></font> but I get the risk :)<br/>
<font color="#A82F2F"><font size="2">(05:09:42 PM)</font> <b>Sialagio:</b></font> &quot;et voila&quot;<br/>
<font color="#A82F2F"><font size="2">(05:09:49 PM)</font> <b>Sialagio:</b></font> everything is back to normal :)<br/>
<font color="#A82F2F"><font size="2">(05:14:41 PM)</font> <b>Sialagio:</b></font> thank you guys, Ill come back later, it is getting late :)<br/>
<font color="#A82F2F"><font size="2">(05:20:53 PM)</font> <b>ipalreadytaken:</b></font> hello all. Im am looking at sails for a project and came up with a couple of questions that i couldnt find answers for.<br/>
<font color="#A82F2F"><font size="2">(05:21:22 PM)</font> <b>ipalreadytaken:</b></font> Is it possible to use redis as a data store or is it only supported for state mngmt?<br/>
<font size="2">(05:23:05 PM)</font><b> The account has disconnected and you are no longer in this chat. You will be automatically rejoined in the chat when the account reconnects.</b><br/>
</body></html>
